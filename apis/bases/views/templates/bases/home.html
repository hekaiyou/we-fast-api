{% extends 'core/navigation.html' %}
{% block title %}ä¸»é¡µ{% endblock %}

{% block main %}
<hgroup>
    <h2 id="home-username"></h2>
    <h3><small id="home-role"></small> <sub id="home-role-sub" style="display:none;">(è§’è‰²)</sub> <em id="home-time"></em> ðŸ™‚!</h3>
</hgroup>
{% endblock %}

{% block javascript %}
<script>
    var c_full_name = Cookies.get('full_name');
    var c_username = Cookies.get('username');
    if (c_full_name) {
        $('#home-username').append(c_full_name);
    } else {
        if (c_username) {
            $('#home-username').append(c_username);
        } else {
            $('#home-username').hide();
        }
    }
    var c_role = Cookies.get('role');
    if (c_role) {
        $('#home-role').append(c_role);
        $('#home-role-sub').show();
    } else {
        $('#home-role').hide();   
    }
    let getTimeState = () => {
        // èŽ·å–å½“å‰æ—¶é—´
        let timeNow = new Date();
        // èŽ·å–å½“å‰å°æ—¶
        let hours = timeNow.getHours();
        // è®¾ç½®é»˜è®¤æ–‡å­—
        let text = '';
        // åˆ¤æ–­å½“å‰æ—¶é—´æ®µ
        if (hours >= 0 && hours <= 10) {
            text = 'æ—©ä¸Šå¥½';
        } else if (hours > 10 && hours <= 14) {
            text = 'ä¸­åˆå¥½';
        } else if (hours > 14 && hours <= 18) {
            text = 'ä¸‹åˆå¥½';
        } else if (hours > 18 && hours <= 24) {
            text = 'æ™šä¸Šå¥½';
        }
        // è¿”å›žå½“å‰æ—¶é—´æ®µå¯¹åº”çš„çŠ¶æ€
        return text;
    };
    $('#home-time').append(getTimeState());
</script>
{% endblock %}